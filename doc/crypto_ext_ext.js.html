<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: crypto/ext/ext.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: crypto/ext/ext.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Derives a key from the given password and parameters using the
 * PBKDF2 with HMAC and SHA256. 
 * 
 * @memberOf module:webcrypto.ext.pbkdf2
 * @alias deriveKeySha256
 * @param {AlgorithmIdentifier} derivedKeyType The algorithm the derived key 
 * will be used for.
 * @param {boolean} extractable Indicating if the key can be extracted from the 
 * CryptoKey object at a later stage.
 * @param {string[]} keyUsages Indicating what can be done with the key.
 * @param {BufferSource|string} password The password from which the key is derived.
 * @param {BufferSource|string} salt The salt.
 * @param {number} iterations The number of iterations to derive the key.
 * @returns {Promise} Promise that returns the newly created CryptoKey.
 */
function deriveKey_pbkdf2_sha256(derivedKeyType, extractable, keyUsages, 
        password, salt, iterations) {
  return new Promise(function(resolve, reject) {
    
    if(isString(password)) {
      password = stringToBytes(password, true);
    }
    if(isString(salt)) {
      salt = stringToBytes(salt, true);
    }
    
    importKey(
      'raw', 
      password,
      {name: 'PBKDF2'}, 
      true, 
      ['deriveKey']
    ).then(function(baseKey) {
      return deriveKey(
        {
          name: 'PBKDF2',
          salt: salt,
          iterations: iterations,
          hash: {name: 'SHA-256'}
        },
        baseKey,
        derivedKeyType,
        extractable,
        keyUsages);
    }).then(function(derivedKey) {
      resolve(derivedKey);
    }).catch(function(err) {
      reject(err);
    });
    
  });
};

/**
 * Generates a digest from the hash function and data given as parameters.
 * 
 * @private
 * @param {string} hashAlg The name of the hash function to use.
 * @param {string|BufferSource} data The data to be hashed.
 * @returns {Promise} A Promise that returns the hash as ByteArray.
 */
function digest_sha_bytes(hashAlg, data) {
  return new Promise(function(resolve, reject) {
    if(isString(data)) {
      data = stringToBytes(data);
    };
    digest({name: hashAlg}, data).then(function(hash) {
      resolve(new Uint8Array(hash));
    }).catch(function(err) {
      reject(err);
    });
  });
};

/**
 * Generates the SHA-256 hash for the data given as parameter and retuns
 * the result as string in Base64URL format.
 * 
 * @memberOf module:webcrypto.ext.sha256
 * @alias base64URL
 * @param {string|BufferSource} data The data to be hashed.
 * @returns {Promise} A Promise that returns the hash as string in Base64URL 
 * format.
 */
function digest_sha256_base64URL(data) {
  return digest_sha_bytes('SHA-256', data).then(function(hash) {
    return bytesToBase64URL(hash);
  });
};

/**
 * Generates the SHA-256 hash for the data given as parameter and retuns
 * the result as string in hexadecimal format.
 * 
 * @memberOf module:webcrypto.ext.sha256
 * @alias hex
 * @param {string|BufferSource} data The data to be hashed.
 * @returns {Promise} A Promise that returns the hash as string in hexadecimal 
 * format.
 */
function digest_sha256_hex(data) {
  return digest_sha_bytes('SHA-256', data).then(function(hash) {
    return bytesToHex(hash);
  });
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-webcrypto.html">webcrypto</a></li></ul><h3>Classes</h3><ul><li><a href="module-webcrypto.CryptoKey.html">CryptoKey</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-webcrypto.ext.html">ext</a></li><li><a href="module-webcrypto.ext.pbkdf2.html">pbkdf2</a></li><li><a href="module-webcrypto.ext.sha256.html">sha256</a></li><li><a href="module-webcrypto.subtle.html">subtle</a></li><li><a href="module-webcrypto.util.html">util</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sun Jan 17 2016 18:38:24 GMT+0100 (Mitteleurop√§ische Zeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
